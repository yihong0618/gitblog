# [ä¸ç”¨ root ä½¿ç”¨å°çˆ±åŒå­¦å’Œ ChatGPT äº¤äº’æŠ˜è…¾è®°](https://github.com/yihong0618/gitblog/issues/258)

## å†™åœ¨å‰é¢
é¡¹ç›®é“¾æ¥ -> https://github.com/yihong0618/xiaogpt
å¤§å¤šæ•°äº‹å„¿å¾ˆç®€å•çš„ä¸€ä¸ªç»“è®ºæ˜¯ï¼šè¿™ä¹ˆåšæœ‰ä»€ä¹ˆç”¨ï¼Ÿ
ä½†æ˜¯ï¼Œæ²¡ç”¨å°±ä¸åšäº†ä¹ˆï¼Ÿå¥½ç©ä¹Ÿæ˜¯æœ‰ç”¨ä¹‹ä¸€å‘€ã€‚

## æ³¨

ä¸‹æ–‡ä¸­ revChatGPT æ–¹æ¡ˆåºŸå¼ƒäº†ï¼Œå…¨éƒ¨æ”¹ç”¨ API, è¯·å‚è€ƒ repo.

## æƒ³æ³•

- ä» ChatGPT åˆšä¸Šç¬¬äºŒå‘¨å¼€å§‹ï¼Œæˆ‘å¼„äº†ä¸ªè´¦å·ï¼Œåæ¥å‘ç°ä¸€ä¸ªå¾ˆå¥½ç©çš„é¡¹ç›® [ChineseAiDungeonChatGPT](https://github.com/bupticybee/ChineseAiDungeonChatGPT) --> ç”¨ ChatGPT ç© DND, æˆ‘çªç„¶æƒ³æˆ‘èƒ½è¯­éŸ³å°±æ›´æœ‰å¸¦å…¥æ„Ÿäº†ã€‚
- å› ä¸ºä¹‹å‰æŠ˜è…¾ [blue](https://github.com/yihong0618/blue) æ—¶å€™äº†è§£äº†ä¸€äº›å°ç±³ IOT è®¾å¤‡çš„äº¤äº’ tts, æˆ‘è§‰å¾—æˆ‘ç”¨ä¸€äº›æ–¹å¼æ˜¯å¯ä»¥å®ç°çš„
- ä¸è¿‡ä»æƒ³æ³•åˆ°å¯ç”¨ç¡®å®ç»å†äº†ä¸å°‘

## å¼€å§‹æŠ˜è…¾

1. æœ€æ—©çš„ idea æ˜¯æŠŠå°çˆ±åŒå­¦ç ´è§£äº†ï¼Œç ´è§£ä¹‹åæ‹¦æˆªæˆ‘çš„å¯¹è¯ï¼Œå¦‚æœå¯¹è¯åŒ…å« `GPT` å°±ç”¨ç ´è§£çš„å°çˆ±å‘é€è¯·æ±‚åˆ° ChatGPT, å†æŠŠ ChatGPT çš„å›å¤æˆªåŒ…ï¼Œè¯»å‡ºæ¥ã€‚
- é‡åˆ°æœ€å¤§çš„å›°éš¾æ˜¯å°çˆ±æ€ä¹ˆç ´è§£ï¼Œæœäº†ä¸€åœˆå‘ç°ï¼Œå°çˆ±æ˜¯æœ‰åŠæ³•é€šè¿‡ä¸²å£æ¥ hook å†åˆ·å›ºä»¶çš„ã€‚
- ä½†ä¸²å£æ˜¯å•¥ï¼Ÿæˆ‘å­¦ä¹ äº†ä¸²å£é€šä¿¡ï¼Œç”¨è‡ªå·±æ ‘è“æ´¾åšå®éªŒï¼Œå»æ·˜å®ä¹° usb2ttl å­¦ä¼šäº†ã€‚ä½†æ˜¯éœ€è¦ç„Šæ¥ï¼Œæˆ‘åˆå» B ç«™åˆ·è§†é¢‘å­¦ä¹ ï¼Œé—®åŒäº‹ç¡¬ä»¶å¤§ç¥å¦‚ä½•ç„Šæ¥ï¼Œå­¦ä¼šäº†ç„Šæ¥ã€‚ä½†ï¼Œä»–å¦ˆçš„ï¼Œæ–°çš„å°çˆ±åŒå­¦æŠŠä¸²å£é€šä¿¡ç»™å°äº†ã€‚
- ç¿»åˆ°äº†ä¸€ä¸ªå›½å¤–ç ´è§£å°çˆ±åŒå­¦çš„ï¼Œ[èƒ½ç”¨æ‹†æœºåçš„ USB æ¥çƒ§å›ºä»¶](https://github.com/duhow/xiaoai-patch/blob/master/research/lx06/install.md)ï¼Œä½†æˆ‘æ²¡æœ‰ windowsï¼Œ-> å­¦ä¹ è€çš„ macbookpro 2015 åˆ·åŒç³»ç»Ÿï¼Œå°è¯•ç»™å°çˆ±åˆ·æœº -> å°ç±³æŠŠè¿™ä¸ªä¹Ÿå°äº†
- æœ‰è¶£çš„æ˜¯æ¯å¤©ç”¨å‘ç°ç¡®å®è¿˜æŒºå¥½ç”¨çš„ï¼Œè®©ä»–æ”¾æ­Œï¼Œç»™æˆ‘å„¿å­æ”¾å°çŒªä½©å¥‡ã€‚äºæ˜¯åˆç»™ä¸ˆæ¯å¨˜ä¹°äº†ä¸€ä¸ªï¼Œç»™å¥¹é…ç½®å¥½ï¼Œå¯ä»¥æ”¾æ­Œã€‚

2. ç¬¬ä¸€ä¸ªæ–¹å¼ä¸å¤ªè¡Œï¼Œå°è¯•å»ç”¨è·¯ç”± openwrt æˆªåŒ…å†å‘é€ï¼Œä¾ç„¶å¤±è´¥ï¼Œæˆ‘æŠ˜è…¾äº†ä¸€ä¸‹å‘ç° https è·å– payload è¿˜æ˜¯æœ‰äº›å›°éš¾çš„
3. è½¬å‘äº† Siri  é‚£ä¹ˆæˆ‘èƒ½ä¸èƒ½ç”¨ Siri  å®ç°å‘¢ï¼Ÿæ˜¯èƒ½çš„ï¼Œå¯ä»¥ç”¨ Siri  -> æ·å¾„ -> è·å–ä½ è¯´çš„è¯ -> å‘é€ ChatGPT -> å°çˆ± or ç›´æ¥ Siri è‡ªå·±æ¥
4. ç½‘å‹[è±¡ç‰™å±±åˆ˜èƒ½](https://twitter.com/disksing)æœ‰ä¸€å¤©å‘ä»–å„¿å­å°çˆ±åŒå­¦çš„èŠå¤©è®°å½•ï¼Œçªç„¶çµæ„Ÿæ¥äº†ï¼Œæˆ‘å¯ä»¥ç”¨æœ€è ¢çš„è½®è¯¢ï¼Œæ¥ä¸æ–­è·å–æœ€æ–°çš„èŠå¤©è®°å½•ï¼Œå¦‚æœæœ‰æ–°çš„ç¬¦åˆè¦æ±‚æˆ‘å°±å‘é€ç»™ ChatGPT --> å†ç”¨ tts è®©å°çˆ±åŒå­¦æœ—è¯»ï¼Œä½†å› ä¸ºæœ—è¯»éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥è½®è¯¢ä¹Ÿæ²¡é‚£ä¹ˆç¬¨äº†ã€‚

## å®ç°

- å…ˆå®ç°ä¸æ–­æ‹¿å¯¹è¯å†å²
- æµ‹è¯• revChatGPT å¯è¡Œ
- åˆ©ç”¨ MiService call tts å¯è¡Œ
- å‰©ä¸‹å°±æ˜¯å†™ä»£ç äº†

## å‡†å¤‡

1. ChatGPT id
2. å°çˆ±éŸ³å“
3. èƒ½æ­£å¸¸è”ç½‘çš„ç¯å¢ƒæˆ– proxy
4. python3.8+

## ä½¿ç”¨

1. pip install -r requirements.txt
2. å‚è€ƒ [MiService](https://github.com/Yonsm/MiService) é¡¹ç›® README å¹¶åœ¨æœ¬åœ° terminal è·‘ `micli list` æ‹¿åˆ°ä½ éŸ³å“çš„ DID æˆåŠŸ **åˆ«å¿˜äº†è®¾ç½® export MI_DID=xxx** è¿™ä¸ª MI_DID ç”¨ 
3. å‚è€ƒ [revChatGPT](https://github.com/acheong08/ChatGPT) é¡¹ç›® README é…ç½® chatGPT çš„ config
4. run `python xiaogpt.py  --hardware ${your_hardware}` hardware ä½ çœ‹å°çˆ±å±è‚¡ä¸Šæœ‰å‹å·ï¼Œè¾“å…¥è¿›æ¥
5. è·‘èµ·æ¥ä¹‹åå°±å¯ä»¥é—®å°çˆ±åŒå­¦é—®é¢˜äº†ï¼Œâ€œå¸®æˆ‘å›ç­”å¼€å¤´çš„é—®é¢˜â€ ä¼šå‘é€ä¸€ä»½ç»™ ChatGPT ç„¶åå°çˆ±åŒå­¦ç”¨ tts å›ç­”

## æ€»ç»“

- å®Œæˆé‚£ä¸€åˆ»ç¡®å®æŒºå¼€å¿ƒï¼Œä½†è¿‡ç¨‹ä¸­å‘ç°äº†å‡ ä¸ªå¥½ç©çš„[åšå®¢](http://javabin.cn/archives/)ï¼ŒæƒŠè®¶äº†åš revChatGPT çš„å­¦ç”ŸçœŸç‰›é€¼ï¼Œå­¦ä¼šäº†ç„Šæ¥ï¼Œå¼€å§‹å‘ç°ç¡¬ä»¶ä¹ŸæŒºæœ‰æ„æ€çš„ï¼Œä¸æ–­æŠ˜è…¾çš„è¿‡ç¨‹æ²®ä¸§æœ‰ä¸€äº›ï¼Œä½†æ›´å¤šçš„æ˜¯å­¦ä¹ æ–°ä¸œè¥¿å¸¦æ¥çš„å…´å¥‹æ„Ÿã€‚
- æ‹†æœºå‘ç°ï¼Œå°çˆ±åŒå­¦å†…éƒ¨åšå·¥ç¡®å®ä¸é”™
- æŠ˜è…¾è¿‡ç¨‹ä¸­çš„æ„Ÿå—ï¼Œå°†æ¥è‚¯å®šæœ‰ä¸€å¤©è¿™äº›æ™ºèƒ½éŸ³ç®±å‚å•†ä¹Ÿä¼šè®­ç»ƒå¤§æ¨¡å‹ï¼Œå°†å½»åº•æ”¹å˜æ™ºèƒ½å®¶å±…ï¼Œä»¿ä½›çœ‹åˆ°äº†æœªæ¥

## å½©è›‹

![image](https://user-images.githubusercontent.com/15976103/219273665-f8c252aa-0b05-4f18-9028-8cada453aea5.png)



---

ç°åœ¨ä¸ç”¨æŠ“åŒ…äº†ï¼Œä¿®æ”¹äº†æ–‡ç« 

---

å¯¹ï¼Œæ–°çš„ç‰ˆæœ¬è¿™ä¸ªæš‚æ—¶ä¸è¡Œ

---

@wsjq5477 å¯è¡Œï¼Œä½†æ˜¯ä¸è¦ mute-xiaomi

---

ä¼šé¢‘ç¹è¯·æ±‚ api, å®¹æ˜“è¢« ban è¦æ˜¯ä¸€ç›´è·‘

---

> @yihong0618 è¯·é—®ä¸‹æ”¾å°çŒªä½©å¥‡æ˜¯ä»€ä¹ˆæµç¨‹ğŸ˜Š

å°çˆ±åŒå­¦ï¼Œå¸®æˆ‘æ’­æ”¾å°çŒªä½©å¥‡



---

æ˜¯çš„ã€‚

---

æ˜¯

---

echo æœ‰äººåšå‡ºæ¥äº†

---

@deadjoker ä¸éœ€è¦ã€‚

---

å¯ä»¥åŒç¯å¢ƒéƒ¨ç½²å¤šä¸ªå§

---

æœ‰æ›´å¤šçš„æŠ¥é”™ä¿¡æ¯ä¹ˆï¼Ÿ@Enchner @liuwx2010 

---

æ·»åŠ  arg --verbose

---

> --mute_xiaoai è¿™ä¸ªå‚æ•°ä¸èƒ½ä½¿ç”¨ï¼Œä¸€ç”¨å°±æŠ¥é”™ MinaServiceé‡Œä¸å­˜åœ¨xxxæ–¹æ³• ä¾‹å¦‚ä¸å­˜åœ¨ player_get_status ä¸å­˜åœ¨player_pause æˆ‘å»æŸ¥äº†æºç çš„ç¡®æ²¡æœ‰
> 
> è¿™ä¸ªé¡¹ç›®æ˜¯ä¸æ˜¯æœ‰ç‚¹bug

1. pip uninstall miservice
2. pip install -U miservice_fork
3. ä»¥å bug å»ºè®®åœ¨è¯¥é¡¹ç›®çš„ issue ä¸‹ç•™è¨€ï¼Œé‚£æ ·å¤§å®¶éƒ½èƒ½çœ‹åˆ°ï¼Œä½ æœä¸‹è¿™ä¸ªï¼Œé‡Œé¢ä¹Ÿæœ‰äººæè¿‡

---

> æˆ‘é‡åˆ°äº†é—®é¢˜ï¼Œ ä½†æ˜¯å°è¯•ä¸‹æ¥æ— æ³•è§£å†³ python3 çš„ç¯å¢ƒ ã€‚ åœ¨MiService é¡¹ç›®ä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤ ./micli.py list æˆ–è€… python3 ./micli.py list æˆ–è€… python3 micli.py listã€‚ ç»™å‡ºå¦‚ä¸‹çš„æŠ¥é”™ã€‚ `xception on login 2330087479: Cannot connect to host sts.api.io.mi.com:443 ssl:True [SSLCertVerificationError: (1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:992)')] Traceback (most recent call last): File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/aiohttp/connector.py", line 980, in _wrap_create_connection return await self._loop.create_connection(*args, **kwargs) # type: ignore[return-value] # noqa ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1112, in create_connection transport, protocol = await self._create_connection_transport( ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1145, in _create_connection_transport await waiter File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/sslproto.py", line 574, in _on_handshake_complete raise handshake_exc File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/sslproto.py", line 556, in _do_handshake self._sslobj.do_handshake() File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/ssl.py", line 979, in do_handshake self._sslobj.do_handshake() ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:992)
> 
> The above exception was the direct cause of the following exception:
> 
> Traceback (most recent call last): File "/Users/pdx/wk/AI/å°çˆ±AI/MiService/miservice/miaccount.py", line 74, in login serviceToken = await self._securityTokenService( ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/Users/pdx/wk/AI/å°çˆ±AI/MiService/miservice/miaccount.py", line 114, in _securityTokenService async with self.session.get( File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/aiohttp/client.py", line 1141, in **aenter** self._resp = await self._coro ^^^^^^^^^^^^^^^^ File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/aiohttp/client.py", line 536, in _request conn = await self._connector.connect( ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/aiohttp/connector.py", line 540, in connect proto = await self._create_connection(req, traces, timeout) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/aiohttp/connector.py", line 901, in _create_connection _, proto = await self._create_direct_connection(req, traces, timeout) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/aiohttp/connector.py", line 1206, in _create_direct_connection raise last_exc File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/aiohttp/connector.py", line 1175, in _create_direct_connection transp, proto = await self._wrap_create_connection( ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/aiohttp/connector.py", line 982, in _wrap_create_connection raise ClientConnectorCertificateError(req.connection_key, exc) from exc aiohttp.client_exceptions.ClientConnectorCertificateError: Cannot connect to host sts.api.io.mi.com:443 ssl:True [SSLCertVerificationError: (1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:992)')] Error https://api.io.mi.com/app/home/device_list: Login failed` æ±‚è§£

ssl é—®é¢˜
1. å°è¯•ä¸ç”¨ vpn
2. å°è¯•æ¢ä¸ªç½‘ç»œï¼Œæ¯”å¦‚æ‰‹æœºçƒ­ç‚¹

---

> ssl é—®é¢˜
> 
> 1. å°è¯•ä¸ç”¨ vpn
> 2. å°è¯•æ¢ä¸ªç½‘ç»œï¼Œæ¯”å¦‚æ‰‹æœºçƒ­ç‚¹

ssl é—®é¢˜

å°è¯•ä¸ç”¨ vpn
å°è¯•æ¢ä¸ªç½‘ç»œï¼Œæ¯”å¦‚æ‰‹æœºçƒ­ç‚¹

---

> æ—©ä¸Šçœ‹åˆ°ä¹‹åï¼Œæœæ–­å…¥æ‰‹ä¸€ä¸ªå°çˆ±éŸ³å“ Playï¼Œç°åœ¨å°çˆ±ç‰ˆGPTå·²ç»ä¸Šçº¿äº†ã€‚è¿‡ç¨‹å§ï¼Œè¯´æ¥ä¹Ÿå¿ƒé…¸ï¼Œè·å–didç´¯ä¸ªåŠæ­»ï¼Œå…¶ä»–éƒ½è¿˜æŒºé¡ºæºœã€‚æ„Ÿè°¢å¤§ç¥çš„æŠ˜è…¾ç¬”è®°ã€‚
> 
> å°±æ˜¯ç°åœ¨ `"enable_edge_tts": true` å°±ç›´æ¥æ²¡å£°éŸ³äº†ï¼Œä¸çŸ¥é“å’‹å›äº‹ã€‚

çœ‹çœ‹ http server æ˜¯å¦å¼€å¯äº†ï¼Œmac çš„è¯éœ€è¦ç‚¹ç¡®è®¤

---

> > å¯ä»¥ç”¨openwrtè·å–å°çˆ±è®¾å¤‡çªå‘ç‰¹å®šæµé‡åè½®è¯¢
> 
> è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘æœ‰openwrt

é‚£ä¸ªæ˜¯å¤±è´¥çš„ã€‚

---

> > > > å¯ä»¥ç”¨openwrtè·å–å°çˆ±è®¾å¤‡çªå‘ç‰¹å®šæµé‡åè½®è¯¢
> > > 
> > > 
> > > è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘æœ‰openwrt
> > 
> > 
> > é‚£ä¸ªæ˜¯å¤±è´¥çš„ã€‚
> 
> æˆ‘æƒ³æ¥å…¥ChatGPTï¼Œå¯ä»¥å®ç°å—å¤§ç¥ï¼Ÿ

ä½ ç…§ç€ README å°±è¡Œå•Šã€‚https://github.com/yihong0618/xiaogpt

---

@l568288g æ˜¯çš„

---

> ç”Ÿå‘½åœ¨äºæŠ˜è…¾!ğŸ‘,å¤©çŒ«ç²¾çµæœ‰è¯•è¿‡å—

å¤©çŒ«ç²¾çµä¸å¯è¡Œã€‚

---

> ä¸€æ¬¡å°±ææˆåŠŸäº†ï¼Œç©çš„ä¸äº¦ä¹ä¹ã€‚è°¢è°¢è¿™ä¹ˆå¥½çš„å¼€æºé¡¹ç›®ã€‚

My pleasure 

---

> å‘¢ï¼Ÿæ”¯æŒå°çˆ±è§¦å±éŸ³ç®±å—ï¼Ÿ

å°çˆ±è§¦å±éŸ³ä¸æ”¯æŒ mute_xiaoai æ ‘è“æ´¾4B æ²¡é—®é¢˜ã€‚

---

> ç°åœ¨é‡åˆ°ä¸ªé—®é¢˜ï¼Œä½¿ç”¨å°çˆ±è§¦å±éŸ³ç®±Pro 8ï¼Œç°åœ¨æ§åˆ¶å°å¯ä»¥æ˜¾ç¤ºGPTçš„å›å¤ï¼Œä½†æ˜¯å°çˆ±éŸ³å“å¹¶æ²¡æœ‰æ’­æ”¾å›å¤å†…å®¹ï¼Œè¿™ä¸ªå¦‚ä½•è§£å†³å‘¢ï¼Ÿ

åŠ ä¸Š â€”use_command å¦å¤–è¯·åœ¨é¡¹ç›®é‡Œæ issue é‚£æ ·å…¶ä»–äººé‡åˆ°äº†ä¹Ÿå®¹æ˜“çœ‹åˆ°

---

> ## éå¸¸æ„Ÿè°¢å¤§ç¥çš„æŒ‡å¯¼ï¼Œæˆ‘ä»å¤´è‡³å°¾è¯¦ç»†å­¦ä¹ äº†ä¸€ä¸‹ï¼Œç„¶åå®é™…æ“ä½œä¸­å‡ºç°äº†ä¸€ç‚¹å°é—®é¢˜ï¼Œè¯·å¤§ç¥æŒ‡å¯¼ã€‚
> è¾“å…¥python xiaogpt.py --hardware L15A --use_chatgpt_api --mute_xiaoaiï¼Œå¼€å§‹è¿è¡Œ
> Running xiaogpt now, ç”¨`å¸®æˆ‘/è¯·å›ç­”`å¼€å¤´æ¥æé—®
> æˆ–ç”¨`å¼€å§‹æŒç»­å¯¹è¯`å¼€å§‹æŒç»­å¯¹è¯
> é—®é¢˜ï¼šè¯·é—®ä¸­å›½è¶³çƒä»€ä¹ˆæ—¶å€™èƒ½æ‹¿åˆ°å¤§åŠ›ç¥æ¯ï¼Ÿ è¿™äº›éƒ½æ­£å¸¸å—ï¼Œç„¶åå‡ºç°é”™è¯¯æç¤ºå¦‚ä¸‹ Traceback (most recent call last): File "D:\project\xiaomi\xiaogpt\xiaogpt.py", line 5, in main() File "D:\project\xiaomi\xiaogpt\xiaogpt\cli.py", line 153, in main loop.run_until_complete(miboy.run_forever()) File "C:\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete return future.result() ^^^^^^^^^^^^^^^ File "D:\project\xiaomi\xiaogpt\xiaogpt\xiaogpt.py", line 469, in run_forever await self.stop_if_xiaoai_is_playing() File "D:\project\xiaomi\xiaogpt\xiaogpt\xiaogpt.py", line 411, in stop_if_xiaoai_is_playing is_playing = await self.get_if_xiaoai_is_playing() ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ File "D:\project\xiaomi\xiaogpt\xiaogpt\xiaogpt.py", line 402, in get_if_xiaoai_is_playing playing_info = await self.mina_service.player_get_status(self.device_id) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ AttributeError: 'MiNAService' object has no attribute 'player_get_status' è¯·æ‚¨æŒ‡æ­£ï¼Œè¯šå¾…å›å¤ï¼Œä¸èƒœæ„Ÿæ¿€ã€‚

pip3 uninstall miservice
pip3 install -U miservice_fork

---

> pip3 uninstall miservice pip3 install -U miservice_fork æ‰§è¡Œå®Œè¿™ä¸¤æ¡å‘½ä»¤åï¼Œæƒ…å†µå¦‚ä¸‹ï¼Œ python xiaogpt.py --hardware L15A --use_chatgpt_api --mute_xiaoai Traceback (most recent call last): File "D:\project\xiaomi\xiaogpt\xiaogpt.py", line 2, in from xiaogpt.cli import main File "D:\project\xiaomi\xiaogpt\xiaogpt\cli.py", line 5, in from xiaogpt.xiaogpt import MiGPT File "D:\project\xiaomi\xiaogpt\xiaogpt\xiaogpt.py", line 22, in from miservice import MiAccount, MiIOService, MiNAService, miio_command ImportError: cannot import name 'MiAccount' from 'miservice' (unknown location) è¯·æŒ‡å¯¼

python3 -m pip install -U miservice_fork

å¦å¤–ï¼Œè¯·æœ€å¥½ä¸è¦åœ¨è¿™é‡Œç•™ issue, åœ¨ xiaogpt é¡¹ç›®é‡Œç•™

---

> æœ‰åŠæ³•ç›‘å¬åˆ°ç±³å®¶ä¼ æ„Ÿå™¨è®¾å¤‡ä¹ˆï¼Ÿ
> å¦‚æœè¿™æ¡è·¯æ‰“é€šäº†ï¼Œå†é…åˆChatGPTï¼Œæ™ºèƒ½å®¶å±…å°±èƒ½è¿æ¥æ¯ä¸ªç¨‹åºå‘˜çš„é«˜å…‰æ—¶åˆ»ã€‚

ç†è®ºä¸Šå¯ä»¥

---

> å¤§ä½¬ï¼Œå…³äºéŸ³ç®±æ“ä½œçš„å“ªäº›apiæ–‡æ¡£ä½ æ˜¯åœ¨å“ªé‡Œæ‰¾åˆ°å•Šï¼Ÿæˆ‘æ‰’äº†ä½ çš„mute apiï¼Œä½†æ˜¯æ„Ÿè§‰å¹¶æ²¡æœ‰muteæ‰ï¼Œ åªå“åº”äº†ä¸ª â€œMsg has been successfully proxy to the device, this service is a simple proxy, if you encounter any problems pls contact ROM's developers directly!!!â€

æ²¡æœ‰ api æ–‡æ¡£ã€‚ã€‚ã€‚
å‚è€ƒ README æœ‰äº›å‹å·ä¸èƒ½ mute, å¦å¤– issue åœ¨ xiaogpt é¡¹ç›®ä¸‹ç•™è¨€æ¯”è¾ƒå¥½ï¼Œé‚£æ ·å¤§å®¶ä¹Ÿéƒ½èƒ½çœ‹è§


---

> micli minaè¿”å›ä¸ºç©º
> æˆ‘çš„è®¾å¤‡æ˜¯å°çˆ±éŸ³å“ å‹å·ä¸ºMDZ-25-DA

å¥½åƒä¸æ”¯æŒè¿™ä¸ªå‹å·

---

> æˆ‘å‹å·æ˜¯MDZ-25-DAæ˜¯ä¸æ˜¯ä¸æ”¯æŒå‘€

æ˜¯ã€‚ã€‚ã€‚

---

ç°åœ¨å¾ˆå¤šè®¾è®¡éƒ½æ”¹å˜äº†ï¼Œæœ‰ç‚¹æƒŠè®¶æˆ‘ 2 æœˆä»½å°±å®ç°äº†ï¼›

---

> ä¸‹æ–‡ä¸­ revChatGPT æ–¹æ¡ˆåºŸå¼ƒäº†ï¼Œå…¨éƒ¨æ”¹ç”¨ API, è¯·å‚è€ƒ repo. è¿™å¥è¯æ˜¯ä»€ä¹ˆæ„æ€å•Š...repoåœ¨å“ªé‡Œ

å°±æ˜¯ xiaogpt æ„æ€æ˜¯ä¸ç”¨åŸæ¥é€†å‘çš„æ–¹æ¡ˆäº†ï¼Œç”¨çš„æ˜¯ api with key çš„æ–¹æ¡ˆ

---

> > > ä¸‹æ–‡ä¸­ revChatGPT æ–¹æ¡ˆåºŸå¼ƒäº†ï¼Œå…¨éƒ¨æ”¹ç”¨ API, è¯·å‚è€ƒ repo. è¿™å¥è¯æ˜¯ä»€ä¹ˆæ„æ€å•Š...repoåœ¨å“ªé‡Œ
> > 
> > 
> > å°±æ˜¯ xiaogpt æ„æ€æ˜¯ä¸ç”¨åŸæ¥é€†å‘çš„æ–¹æ¡ˆäº†ï¼Œç”¨çš„æ˜¯ api with key çš„æ–¹æ¡ˆ
> 
> æˆ‘æäº†å¥½ä¹… MDZ-25-DA è¿™ä¸ªå‹å·ç¡®å®ä¸è¡ŒæŠŠ æˆ‘æµ‹è¯•äº†å¯ä»¥æ’­æ”¾å£°éŸ³..è·å–æ–‡æœ¬ä¸è¡Œ

å°è±¡ä¸­è¿™å‹å·æ˜¯ä¸è¡Œçš„ã€‚ã€‚ã€‚ã€‚

---

> æˆ‘æƒ³é—®ä¸€ä¸‹ç°åœ¨è¿™ä¸ªé¡¹ç›®çš„æ–¹æ¡ˆè¿˜æ˜¯ç½‘ç»œè·å–å˜›å°±æ˜¯è¯»ä¸€ä¸ªå°ç±³è´¦å·éŸ³ç®±çš„è®°å½• è¿™ä¸ªæ–¹å¼æˆ‘æµ‹è¯•çš„å»¶è¿Ÿæ¯”è¾ƒå¤§ è¿˜æ˜¯ä½ è¿™ä¸ªé¡¹ç›®çš„è¯æ˜¯è¯»çš„æœ¬åœ°çš„ä¸€ä¸ªæ•°æ®åº“å•Šä¼šæ¯”è¾ƒå¿«ä¸€ç‚¹

æ˜¯çš„ã€‚å…¶å®å»¶è¿Ÿå¯ä»¥æ”¹ sleep æ—¶é—´çš„ï¼Œä½†ä¼šé¢‘ç¹è¯·æ±‚ä¸å»ºè®®

---

> > > æˆ‘æƒ³é—®ä¸€ä¸‹ç°åœ¨è¿™ä¸ªé¡¹ç›®çš„æ–¹æ¡ˆè¿˜æ˜¯ç½‘ç»œè·å–å˜›å°±æ˜¯è¯»ä¸€ä¸ªå°ç±³è´¦å·éŸ³ç®±çš„è®°å½• è¿™ä¸ªæ–¹å¼æˆ‘æµ‹è¯•çš„å»¶è¿Ÿæ¯”è¾ƒå¤§ è¿˜æ˜¯ä½ è¿™ä¸ªé¡¹ç›®çš„è¯æ˜¯è¯»çš„æœ¬åœ°çš„ä¸€ä¸ªæ•°æ®åº“å•Šä¼šæ¯”è¾ƒå¿«ä¸€ç‚¹
> > 
> > 
> > æ˜¯çš„ã€‚å…¶å®å»¶è¿Ÿå¯ä»¥æ”¹ sleep æ—¶é—´çš„ï¼Œä½†ä¼šé¢‘ç¹è¯·æ±‚ä¸å»ºè®®
> 
> å¤§ä½¬æœ‰ç¾¤å— åŠ ä¸€ä¸ªè®¨è®º

æ²¡æœ‰ã€‚ã€‚ã€‚

---

> å…„å¼Ÿæˆ‘è¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ æˆ‘è¦æ€ä¹ˆç¦æ­¢æ‰å°çˆ±åŒå­¦çš„å›ç­” æˆ‘è¯»å–åˆ°æˆ‘è‡ªå·±è¯´çš„è¯çš„æ—¶å€™ è¿™é‡Œæœ‰ä¸€æ®µæ—¶é—´çš„å»¶è¿Ÿ æˆ‘è¦åœæ­¢å°çˆ±åŒå­¦çš„å›ç­”è¦æ€ä¹ˆå¤„ç†

æœ‰ â€”mute å‚æ•°ï¼Œä½†æœ‰äº›æœºå‹ä¸æ”¯æŒï¼Œè¯·å‚è€ƒ xiaogpt çš„ README ä¹Ÿå¯ä»¥åœ¨é‚£é‡Œç•™ issue

---

> S12A

S12A ä¸èƒ½ç”¨æˆ‘è¿™ä¸ªæ–¹å¼å”¤é†’ï¼Œå¦å¤–èƒ½åœ¨ xiaogpt é¡¹ç›®ä¸‹ç•™ issue ä¹ˆï¼Ÿé‚£æ ·å¦‚æœå…¶ä»–äººé‡åˆ°é—®é¢˜ä¹Ÿèƒ½çœ‹åˆ°ï¼Œè°¢è°¢

---

> > æœ‰è¶£çš„æ˜¯æ¯å¤©ç”¨å‘ç°ç¡®å®è¿˜æŒºå¥½ç”¨çš„ï¼Œè®©ä»–æ”¾æ­Œï¼Œç»™æˆ‘å„¿å­æ”¾å°çŒªä½©å¥‡ã€‚äºæ˜¯åˆç»™ä¸ˆæ¯å¨˜ä¹°äº†ä¸€ä¸ªï¼Œç»™å¥¹é…ç½®å¥½ï¼Œå¯ä»¥æ”¾æ­Œã€‚
> 
> @yihong0618 è¯·é—®è¿™å¥æ˜¯å•¥æ„æ€äº†ï¼Ÿ å°çŒªä½©å¥‡æ”¶è´¹ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿåœ¨å°è¯•å¦‚ä½•è®©å°çˆ±èµ°è‡ªå·±çš„æœåŠ¡ï¼Œå»è‡ªåŠ¨æ’­æ”¾è‡ªå·±çš„èµ„æºåˆ—è¡¨ã€‚

è¿™ä¸ªä¸éš¾ï¼Œæ˜¯å¯ä»¥çš„ã€‚æˆ‘æœ‰æ—¶é—´å†™ä¸ªæ•™ç¨‹å›å¤ä½ 

---

> > > > æœ‰è¶£çš„æ˜¯æ¯å¤©ç”¨å‘ç°ç¡®å®è¿˜æŒºå¥½ç”¨çš„ï¼Œè®©ä»–æ”¾æ­Œï¼Œç»™æˆ‘å„¿å­æ”¾å°çŒªä½©å¥‡ã€‚äºæ˜¯åˆç»™ä¸ˆæ¯å¨˜ä¹°äº†ä¸€ä¸ªï¼Œç»™å¥¹é…ç½®å¥½ï¼Œå¯ä»¥æ”¾æ­Œã€‚
> > > 
> > > 
> > > @yihong0618 è¯·é—®è¿™å¥æ˜¯å•¥æ„æ€äº†ï¼Ÿ å°çŒªä½©å¥‡æ”¶è´¹ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿåœ¨å°è¯•å¦‚ä½•è®©å°çˆ±èµ°è‡ªå·±çš„æœåŠ¡ï¼Œå»è‡ªåŠ¨æ’­æ”¾è‡ªå·±çš„èµ„æºåˆ—è¡¨ã€‚
> > 
> > 
> > è¿™ä¸ªä¸éš¾ï¼Œæ˜¯å¯ä»¥çš„ã€‚æˆ‘æœ‰æ—¶é—´å†™ä¸ªæ•™ç¨‹å›å¤ä½ 
> 
> 666ï¼Œ çœ‹äº†ä½ çš„ç®€å†ï¼Œå“ˆå“ˆå“ˆï¼ŒçœŸæ˜¯å¤§ä½¬å‘€

ç°åœ¨ä½ å¯ä»¥å‚è€ƒè¿™ä¸ª https://origin.v2ex.com/t/982027 ä½†ä¸å¤ªæˆç†Ÿï¼Œæœ‰ç²¾åŠ›æˆ‘å†™ä¸ªç¨å¾®å¥½ç‚¹çš„æ–¹æ¡ˆã€‚ã€‚ã€‚

---

> > @yihong0618 å¤§ä½¬ï¼ŒæŒ‰ç…§ä½ å†™çš„[MiService](https://github.com/yihong0618/MiService)è¿™ä¸ªé¡¹ç›®èµ°ï¼Œç¢°åˆ°é”™è¯¯å¥½å‡ å¤©ä¹Ÿæ²¡æœ‰è§£å†³ï¼Œæ±‚è§£ç­”
> 
> > 
> 
> > root@ecs-xxxxx:/etc/mi/MiService# micli.py list Exception on login xxxxxxxxxxx: 'userId' Traceback (most recent call last): File "/usr/local/lib/python3.10/dist-packages/miservice/miaccount.py", line 71, in login self.token['userId'] = resp['userId'] KeyError: 'userId' Error https://api.io.mi.com/app/home/device_list: Login failed
> 
> 
> 
> https://github.com/yihong0618/xiaogpt/issues/6#issuecomment-1866617374

åº”è¯¥æ˜¯è§¦å‘é£æ§äº†ï¼Œä½ å¾—æœ¬åœ°æµè§ˆå™¨ç™»å½•ä¸‹å°ç±³äº‘